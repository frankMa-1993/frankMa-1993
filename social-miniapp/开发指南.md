# 社交小程序开发指南

## 项目概述

这是一个基于 uniapp + Vue 3 开发的社交类微信小程序，包含了完整的社交功能模块。

## 开发环境搭建

### 1. 安装开发工具

#### HBuilderX (推荐)
- 下载地址：https://www.dcloud.io/hbuilderx.html
- 选择正式版，包含uni-app开发环境

#### 微信开发者工具
- 下载地址：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
- 用于预览和调试微信小程序

### 2. 项目导入

1. 打开HBuilderX
2. 文件 -> 导入 -> 从本地目录导入
3. 选择项目根目录 `social-miniapp`
4. 点击导入

### 3. 运行项目

#### 微信小程序
1. 在HBuilderX中点击 运行 -> 运行到小程序模拟器 -> 微信开发者工具
2. 首次运行会自动打开微信开发者工具
3. 在微信开发者工具中预览效果

#### H5版本
1. 点击 运行 -> 运行到浏览器 -> Chrome
2. 自动打开浏览器预览H5版本

## 项目配置

### 1. 小程序配置

编辑 `manifest.json` 文件：

```json
{
  "mp-weixin": {
    "appid": "你的小程序AppID",
    "setting": {
      "urlCheck": false
    }
  }
}
```

### 2. API配置

编辑 `utils/request.js` 文件，修改API基础地址：

```javascript
constructor() {
  this.baseURL = 'https://your-api-domain.com/api'
}
```

### 3. 图标资源

替换 `static/tabbar/` 目录下的图标文件：
- home.png / home-active.png (首页)
- discover.png / discover-active.png (发现)
- publish.png / publish-active.png (发布)
- message.png / message-active.png (消息)
- profile.png / profile-active.png (个人)

建议尺寸：40x40像素，PNG格式

## 功能模块说明

### 1. 用户认证模块

**文件位置：**
- `pages/login/login.vue` - 登录页面
- `utils/auth.js` - 认证工具函数

**主要功能：**
- 手机号验证码登录
- 微信授权登录
- 登录状态管理

**开发要点：**
- 替换模拟API为真实接口
- 配置微信登录参数
- 处理登录失败情况

### 2. 动态发布模块

**文件位置：**
- `pages/publish/publish.vue` - 发布页面
- `pages/index/index.vue` - 动态列表
- `pages/detail/detail.vue` - 动态详情

**主要功能：**
- 文字内容发布
- 图片上传和预览
- 话题标签管理
- 位置信息选择

**开发要点：**
- 实现图片上传接口
- 添加内容审核机制
- 优化图片压缩处理

### 3. 社交互动模块

**主要功能：**
- 点赞和取消点赞
- 评论和回复
- 用户关注系统
- 内容分享功能

**开发要点：**
- 实现实时互动更新
- 添加防刷机制
- 优化交互体验

### 4. 消息系统模块

**文件位置：**
- `pages/message/message.vue` - 消息页面

**主要功能：**
- 私信聊天功能
- 系统通知管理
- 未读消息提醒

**开发要点：**
- 集成WebSocket实现实时消息
- 添加消息推送功能
- 优化消息存储机制

### 5. 个人中心模块

**文件位置：**
- `pages/profile/profile.vue` - 个人中心
- `pages/userProfile/userProfile.vue` - 用户资料

**主要功能：**
- 个人信息管理
- 动态管理
- 设置功能

**开发要点：**
- 实现头像上传功能
- 添加隐私设置选项
- 优化个人资料展示

## 样式开发规范

### 1. 颜色使用

```scss
// 主色调
$primary-color: #007AFF;
$success-color: #34C759;
$warning-color: #FF9500;
$error-color: #FF3B30;

// 文字颜色
$text-color: #333333;
$text-secondary: #666666;
$text-muted: #999999;
```

### 2. 尺寸规范

```scss
// 间距
$spacing-small: 10rpx;
$spacing-medium: 20rpx;
$spacing-large: 30rpx;

// 字体大小
$font-size-small: 24rpx;
$font-size-normal: 28rpx;
$font-size-large: 32rpx;
```

### 3. 组件样式

- 使用统一的卡片样式 `.card`
- 按钮使用 `.btn-primary`、`.btn-secondary`
- 头像使用 `.avatar` 系列类名

## API接口对接

### 1. 接口文档

所有API接口定义在 `api/index.js` 文件中，包括：

- `userApi` - 用户相关接口
- `postApi` - 动态相关接口
- `commentApi` - 评论相关接口
- `messageApi` - 消息相关接口
- `discoverApi` - 发现相关接口

### 2. 请求封装

使用 `utils/request.js` 中的请求工具：

```javascript
import { userApi } from '@/api/index.js'

// 获取用户信息
const userInfo = await userApi.getUserInfo(userId)
```

### 3. 错误处理

请求工具已集成统一的错误处理：
- HTTP状态码错误处理
- 业务状态码错误处理
- 网络异常处理
- 登录过期处理

## 性能优化建议

### 1. 图片优化

- 使用合适的图片尺寸
- 启用图片懒加载
- 压缩图片质量
- 使用WebP格式

### 2. 代码优化

- 组件按需加载
- 避免内存泄漏
- 使用防抖和节流
- 优化列表渲染

### 3. 网络优化

- 实现请求缓存
- 避免重复请求
- 使用分页加载
- 预加载关键数据

## 测试和调试

### 1. 开发调试

- 使用HBuilderX的调试功能
- 在微信开发者工具中测试
- 使用真机调试功能

### 2. 性能测试

- 监控页面加载时间
- 检查内存使用情况
- 测试网络异常情况

### 3. 兼容性测试

- 测试不同版本微信
- 测试不同设备尺寸
- 测试iOS和Android

## 发布部署

### 1. 代码构建

```bash
# 构建微信小程序
npm run build:mp-weixin

# 构建H5版本
npm run build:h5
```

### 2. 小程序发布

1. 在微信开发者工具中上传代码
2. 登录微信公众平台
3. 提交审核
4. 审核通过后发布

### 3. 版本管理

- 使用语义化版本号
- 记录版本更新日志
- 做好版本回滚准备

## 常见问题

### 1. 开发环境问题

**Q: HBuilderX运行报错？**
A: 检查Node.js版本，建议使用14+版本

**Q: 微信开发者工具无法打开？**
A: 检查开发者工具路径配置，重新设置服务端口

### 2. 功能开发问题

**Q: 图片上传失败？**
A: 检查上传接口配置，确认文件大小限制

**Q: 登录状态丢失？**
A: 检查Token过期处理，实现自动刷新机制

### 3. 性能问题

**Q: 页面加载慢？**
A: 优化图片大小，使用分页加载，减少初始数据量

**Q: 内存占用高？**
A: 检查是否有内存泄漏，及时清理无用数据

## 技术支持

如遇到开发问题，可通过以下方式获取帮助：

1. 查看uni-app官方文档：https://uniapp.dcloud.io/
2. 微信小程序开发文档：https://developers.weixin.qq.com/miniprogram/dev/
3. Vue.js官方文档：https://vuejs.org/

## 更新维护

### 1. 依赖更新

定期更新项目依赖：

```bash
npm update
```

### 2. 功能迭代

- 收集用户反馈
- 规划新功能开发
- 持续优化用户体验

### 3. 安全维护

- 定期检查安全漏洞
- 更新安全补丁
- 加强数据保护